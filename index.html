<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover" />
<title>KNM â€“ Lessons 6 & 7 & 8 & 9 & 10 â€¢ Fillâ€‘in Quiz (Mobile)</title>
<style>
  :root{color-scheme:dark light}
  body{margin:0;font:16px/1.5 system-ui,Segoe UI,Roboto,Arial;background:#0b0f1c;color:#e5e7eb}
  .wrap{max-width:920px;margin:24px auto;padding:16px}
  .card{background:#0f1628;border:1px solid #1f2b44;border-radius:12px;padding:16px}
  .row{display:flex;flex-wrap:wrap;gap:12px;align-items:center}
  label{font-weight:600;color:#9ca3af}
  select,input[type=text]{background:#0b1220;border:1px solid #243041;color:#e5e7eb;padding:12px;border-radius:10px}
  button{background:#22d3ee;color:#00242a;border:0;padding:12px 16px;border-radius:10px;font-weight:700;cursor:pointer}
  button[disabled]{opacity:.6;cursor:not-allowed}
  .pill{display:inline-block;padding:4px 10px;border-radius:999px;background:#0b1220;border:1px solid #22314a;color:#9ca3af;font-size:12px;margin-right:6px}
  .prompt{font-size:26px;font-weight:800;margin:12px 0}
  .feedback{min-height:24px;margin-top:8px}
  .ok{color:#22c55e;font-weight:700}
  .bad{color:#ef4444;font-weight:700}
  .bar{height:8px;border-radius:999px;background:#1f2937;overflow:hidden;margin:14px 0}
  .bar>span{display:block;height:100%;background:linear-gradient(90deg,#06b6d4,#22c55e);width:0%}
  .small{font-size:12px;color:#9ca3af}
  @media (max-width:560px){ .row{gap:10px} .prompt{font-size:22px} button{padding:12px 14px} }
</style>
</head>
<body>
<div class="wrap">
  <h1>ðŸ‡³ðŸ‡± KNM â€“ Lessons 6 & 7 & 8 & 9 & 10 â€¢ Fillâ€‘in Quiz (Mobile)</h1>

  <div class="card">
    <div class="row" style="gap:18px">
      <div><label>Direction:</label>
        <label><input type="radio" name="dir" value="nl-en" checked> NL â†’ EN</label>
        <label><input type="radio" name="dir" value="en-nl"> EN â†’ NL</label>
      </div>
      <div>
        <label for="lesson">Lesson:</label>
        <select id="lesson">
          <option value="__ALL__">All (6 & 7 & 8 & 9 & 10)</option>
          <option>Lesson 6</option>
          <option>Lesson 7</option>
          <option>Lesson 8</option>
          <option>Lesson 9</option>
          <option>Lesson 10</option>
        </select>
      </div>
      <div><label><input type="checkbox" id="lenient" checked> Lenient check</label></div>
      <div style="margin-left:auto"><button id="startBtn">Start</button></div>
    </div>
    <div class="small" id="status"></div>
  </div>

  <div class="card" id="quiz" style="display:none;margin-top:12px">
    <div class="row" style="justify-content:space-between">
      <div>
        <span class="pill" id="lessonPill"></span>
        <span class="pill" id="dirPill"></span>
      </div>
      <div class="small"><span id="score">0</span> correct â€¢ <span id="progress">0/0</span></div>
    </div>
    <div class="bar"><span id="barFill"></span></div>

    <div>
      <div class="prompt" id="prompt"></div>
      <div class="row">
        <input id="answer" type="text" placeholder="Type answerâ€¦" autocomplete="off"
               autocapitalize="off" autocorrect="off" spellcheck="false" inputmode="text" />
        <button id="checkBtn">Check</button>
      </div>
      <div class="feedback" id="feedback"></div>
      <div class="small" id="meta"></div>
    </div>
  </div>
</div>

<script>
(function(){
  // ---- Data (Lessons 6 & 7 & 8 & 9 & 10) ----
  const ROWS = [
    {"lesson":"Lesson 6","nl":"de volwassenen","en":"the adults"},
    {"lesson":"Lesson 6","nl":"hoofdstuk","en":"chapter"},
    {"lesson":"Lesson 6","nl":"de verloskundige","en":"the midwife"},
    {"lesson":"Lesson 6","nl":"controles","en":"checkups"},
    {"lesson":"Lesson 6","nl":"bevallen","en":"delivery"},
    {"lesson":"Lesson 6","nl":"kraamhulp","en":"maternity assistance"},
    {"lesson":"Lesson 6","nl":"meten en wegen","en":"measure and weigh"},
    {"lesson":"Lesson 6","nl":"de ontwikkeling","en":"the developemnt"},
    {"lesson":"Lesson 6","nl":"advies","en":"advice"},
    {"lesson":"Lesson 6","nl":"vaccinaties","en":"vaccinations"},
    {"lesson":"Lesson 6","nl":"prik","en":"injection"},
    {"lesson":"Lesson 6","nl":"tegen ziektes","en":"against diseases"},
    {"lesson":"Lesson 6","nl":"Groeiboek","en":"growth book"},
    {"lesson":"Lesson 6","nl":"gasouderbureau","en":"childcare agency"},
    {"lesson":"Lesson 6","nl":"buitenschool","en":"after school / outdoor school"},
    {"lesson":"Lesson 6","nl":"kinderopvangtoeslag","en":"child care allowance"},
    {"lesson":"Lesson 6","nl":"kinder bijslag","en":"child benefits"},
    {"lesson":"Lesson 6","nl":"de kleren","en":"the clothes"},
    {"lesson":"Lesson 6","nl":"de leeftijd","en":"age"},
    {"lesson":"Lesson 6","nl":"niet slaan","en":"do not beat"},
    {"lesson":"Lesson 6","nl":"ruzie","en":"fight / Quarrel"},
    {"lesson":"Lesson 6","nl":"Jeugdzorg","en":"youth service / youth care"},
    {"lesson":"Lesson 6","nl":"mishandeld","en":"abused / mistreat"},
    {"lesson":"Lesson 6","nl":"straf","en":"punishment"},
    {"lesson":"Lesson 6","nl":"Meldpunt","en":"contact point / hotline"},
    {"lesson":"Lesson 6","nl":"lid worden","en":"become a member / join"},
    {"lesson":"Lesson 6","nl":"voorlezen","en":"read aloud"},
    {"lesson":"Lesson 6","nl":"verantwoordelijk","en":"responsible"},
    {"lesson":"Lesson 6","nl":"boete","en":"fine"},
    {"lesson":"Lesson 6","nl":"onderwijs","en":"education"},
    {"lesson":"Lesson 6","nl":"openbare scholen","en":"public schools"},
    {"lesson":"Lesson 6","nl":"leerplicht","en":"mandate learning / compulsory education"},
    {"lesson":"Lesson 6","nl":"vrijheid","en":"freedom"},
    {"lesson":"Lesson 6","nl":"knutselen","en":"crafts"},
    {"lesson":"Lesson 6","nl":"De voorschool","en":"the preschool"},
    {"lesson":"Lesson 6","nl":"wachtlijst","en":"waiting list"},
    {"lesson":"Lesson 6","nl":"juf","en":"teacher"},
    {"lesson":"Lesson 6","nl":"tekenen","en":"to draw"},
    {"lesson":"Lesson 6","nl":"tellen","en":"count"},
    {"lesson":"Lesson 6","nl":"rekenen","en":"calculate"},
    {"lesson":"Lesson 6","nl":"de vakken","en":"the subjects"},
    {"lesson":"Lesson 6","nl":"aardrijkskunde","en":"geography"},
    {"lesson":"Lesson 6","nl":"gescheidenis","en":"history"},
    {"lesson":"Lesson 6","nl":"de schoolgids","en":"school diary"},
    {"lesson":"Lesson 6","nl":"strookje","en":"strips / slip / label"},
    {"lesson":"Lesson 6","nl":"rapport","en":"report"},
    {"lesson":"Lesson 6","nl":"voortgezet onderwijs","en":"secondary education"},
    {"lesson":"Lesson 6","nl":"ouderavond","en":"parents evening"},
    {"lesson":"Lesson 6","nl":"gesprek","en":"conversation"},
    {"lesson":"Lesson 6","nl":"overblijven","en":"over stay"},
    {"lesson":"Lesson 6","nl":"beroep","en":"profession"},
    {"lesson":"Lesson 6","nl":"de oudbijdrage","en":"the old contribution"},
    {"lesson":"Lesson 7","nl":"verdienen","en":"earn"},
    {"lesson":"Lesson 7","nl":"geld","en":"money"},
    {"lesson":"Lesson 7","nl":"Betaald","en":"Pay"},
    {"lesson":"Lesson 7","nl":"eigen bedrijf","en":"Own company"},
    {"lesson":"Lesson 7","nl":"Vrijwillingerwerk","en":"Volunteer work"},
    {"lesson":"Lesson 7","nl":"Tijdelijk","en":"temperory"},
    {"lesson":"Lesson 7","nl":"duidelijk","en":"clearly"},
    {"lesson":"Lesson 7","nl":"Flexwerker","en":"Flexible worker"},
    {"lesson":"Lesson 7","nl":"Zelfstandig ondernemer","en":"self employed Entrepreneur"},
    {"lesson":"Lesson 7","nl":"Uitzend bereau","en":"Employement agency"},
    {"lesson":"Lesson 7","nl":"verboden","en":"forbidden"},
    {"lesson":"Lesson 7","nl":"regelmatige","en":"regular"},
    {"lesson":"Lesson 7","nl":"onregelmatige","en":"irregular"},
    {"lesson":"Lesson 7","nl":"werknemer","en":"employee"},
    {"lesson":"Lesson 7","nl":"werkgever","en":"employer"},
    {"lesson":"Lesson 7","nl":"monteurs","en":"mechanic"},
    {"lesson":"Lesson 7","nl":"solliciteren","en":"apply"},
    {"lesson":"Lesson 7","nl":"past","en":"suits"},
    {"lesson":"Lesson 7","nl":"diensten sector","en":"service sector"},
    {"lesson":"Lesson 7","nl":"zorg en welfare","en":"care and welfare"},
    {"lesson":"Lesson 7","nl":"Bouw","en":"construction"},
    {"lesson":"Lesson 7","nl":"Horeca","en":"Catering"},
    {"lesson":"Lesson 7","nl":"Handel","en":"Trade"},
    {"lesson":"Lesson 7","nl":"vervoer","en":"Transport"},
    {"lesson":"Lesson 7","nl":"Chauffeur","en":"Driver"},
    {"lesson":"Lesson 7","nl":"Beveiliging","en":"Security"},
    {"lesson":"Lesson 7","nl":"groene sector","en":"green sector"},
    {"lesson":"Lesson 7","nl":"opleiding","en":"education"},
    {"lesson":"Lesson 7","nl":"waarderen","en":"appreciate"},
    {"lesson":"Lesson 7","nl":"Ongeschoold","en":"Uneducated"},
    {"lesson":"Lesson 7","nl":"ROC","en":"regionaal opleidingencentrum / Regional training center"},
    {"lesson":"Lesson 7","nl":"stage lopen","en":"internship"},
    {"lesson":"Lesson 7","nl":"Ervaring","en":"experience"},
    {"lesson":"Lesson 7","nl":"Lager niveau","en":"Lower level"},
    {"lesson":"Lesson 7","nl":"verpleegkundige","en":"nurse"},
    {"lesson":"Lesson 7","nl":"Kwalitieten","en":"Qualities"},
    {"lesson":"Lesson 7","nl":"betrouwbaar","en":"reliable"},
    {"lesson":"Lesson 7","nl":"doorzetter","en":"go-getter"},
    {"lesson":"Lesson 7","nl":"handig","en":"useful"},
    {"lesson":"Lesson 7","nl":"zelfstandig","en":"independent"},
    {"lesson":"Lesson 7","nl":"zorgzaam","en":"caring"},
    {"lesson":"Lesson 7","nl":"geduld","en":"patient"},
    {"lesson":"Lesson 7","nl":"vuil werk","en":"dirt work"},
    {"lesson":"Lesson 7","nl":"zwaar werk","en":"strong work"},
    {"lesson":"Lesson 7","nl":"werkzoekende","en":"work seeker"},
    {"lesson":"Lesson 7","nl":"kwijtraakt","en":"loses"},
    {"lesson":"Lesson 7","nl":"werkloos","en":"unemployed"},
    {"lesson":"Lesson 7","nl":"vacatures","en":"vacancy"},
    {"lesson":"Lesson 7","nl":"bijstand","en":"assistance"},
    {"lesson":"Lesson 7","nl":"spaargeld","en":"savings money"},
    {"lesson":"Lesson 7","nl":"plichten","en":"duties"},
    {"lesson":"Lesson 7","nl":"uitzend kracht","en":"temporary worker"},
    {"lesson":"Lesson 7","nl":"de krant","en":"the newspaper"},
    {"lesson":"Lesson 7","nl":"vaker","en":"more often"},
    {"lesson":"Lesson 7","nl":"De functie","en":"the position"},
    {"lesson":"Lesson 7","nl":"De taken","en":"the tasks"},
    {"lesson":"Lesson 7","nl":"De functie-eisen","en":"requirements / The job requirements"},
    {"lesson":"Lesson 7","nl":"stellen","en":"to ask / Set"},
    {"lesson":"Lesson 7","nl":"ondernemingsplan","en":"business plan"},
    {"lesson":"Lesson 7","nl":"De Kamer van Koophandel","en":"Chamber of Commerce"},
    {"lesson":"Lesson 7","nl":"de wet","en":"the law"},
    {"lesson":"Lesson 7","nl":"Rechten en Plichten","en":"Rights and duties"},
    {"lesson":"Lesson 7","nl":"Het arbeidscontract","en":"Employment contract"},
    {"lesson":"Lesson 7","nl":"proeftijd","en":"probation"},
    {"lesson":"Lesson 7","nl":"ontslag","en":"dismiss"},
    {"lesson":"Lesson 7","nl":"Cao-","en":"Agreement"},
    {"lesson":"Lesson 7","nl":"minimumloon","en":"minimum wage"},
    {"lesson":"Lesson 7","nl":"opbellen","en":"call"},
    {"lesson":"Lesson 7","nl":"Loonstrook","en":"payslip"},
    {"lesson":"Lesson 7","nl":"nettosaliris","en":"net salary"},
    {"lesson":"Lesson 7","nl":"brutosaliris","en":"gross salary"},
    {"lesson":"Lesson 7","nl":"regering","en":"government"},
    {"lesson":"Lesson 7","nl":"pensioen","en":"pension"},
    {"lesson":"Lesson 7","nl":"afsluiten","en":"shutdown"},
    {"lesson":"Lesson 7","nl":"jaaropgave","en":"annual statement"},
    {"lesson":"Lesson 7","nl":"De Vakbond","en":"Union"},
    {"lesson":"Lesson 7","nl":"Overleg","en":"Consultation"},
    {"lesson":"Lesson 7","nl":"werkoverleg","en":"work meeting"},
    {"lesson":"Lesson 7","nl":"vergadering","en":"meeting"},
    {"lesson":"Lesson 7","nl":"de leiding","en":"the leadership"},
    {"lesson":"Lesson 7","nl":"afdeling","en":"department"},
    {"lesson":"Lesson 7","nl":"praatje","en":"chat"},
    {"lesson":"Lesson 7","nl":"functioneringsgesprek","en":"performance appraisal"},
    {"lesson":"Lesson 7","nl":"Discriminatie","en":"Discrimination"},
    {"lesson":"Lesson 7","nl":"grapje","en":"just kidding"},
    {"lesson":"Lesson 8","nl":"alleen","en":"alone"},
    {"lesson":"Lesson 8","nl":"gescheiden","en":"seperated"},
    {"lesson":"Lesson 8","nl":"huwelijken","en":"weddings"},
    {"lesson":"Lesson 8","nl":"samenlevingscontract tekenen","en":"Living together contract"},
    {"lesson":"Lesson 8","nl":"gemiddeld","en":"average"},
    {"lesson":"Lesson 8","nl":"gezin","en":"family"},
    {"lesson":"Lesson 8","nl":"ouder","en":"parents"},
    {"lesson":"Lesson 8","nl":"ontmoeten","en":"meet"},
    {"lesson":"Lesson 8","nl":"keren","en":"times"},
    {"lesson":"Lesson 8","nl":"afspraak","en":"appointment"},
    {"lesson":"Lesson 8","nl":"de puberteit","en":"menstruation / Puberty"},
    {"lesson":"Lesson 8","nl":"seksuale voorlichting","en":"sex information"},
    {"lesson":"Lesson 8","nl":"verliefd","en":"in love"},
    {"lesson":"Lesson 8","nl":"dominee","en":"pastor"},
    {"lesson":"Lesson 8","nl":"bloot","en":"naked"},
    {"lesson":"Lesson 8","nl":"benen","en":"legs"},
    {"lesson":"Lesson 8","nl":"Lichamelijk","en":"physical"},
    {"lesson":"Lesson 8","nl":"openbaar","en":"public"},
    {"lesson":"Lesson 8","nl":"omgaan met elkaar","en":"interact with each other"},
    {"lesson":"Lesson 8","nl":"geloof","en":"belief"},
    {"lesson":"Lesson 8","nl":"grondwet","en":"base law / constitution"},
    {"lesson":"Lesson 8","nl":"huishouden","en":"house hold  / housekeeping"},
    {"lesson":"Lesson 8","nl":"leiding","en":"leading"},
    {"lesson":"Lesson 8","nl":"gewoontes","en":"habits"},
    {"lesson":"Lesson 8","nl":"keuzes","en":"choices"},
    {"lesson":"Lesson 8","nl":"verbieden","en":"reject / prohibit"},
    {"lesson":"Lesson 8","nl":"verkrachting","en":"rape"},
    {"lesson":"Lesson 8","nl":"gevangenis","en":"prison"},
    {"lesson":"Lesson 8","nl":"dwingen","en":"force"},
    {"lesson":"Lesson 8","nl":"Incest","en":"family sex"},
    {"lesson":"Lesson 8","nl":"neef en nicht","en":"niece and nephew"},
    {"lesson":"Lesson 8","nl":"heel weinig","en":"much less"},
    {"lesson":"Lesson 8","nl":"vermoord","en":"murder"},
    {"lesson":"Lesson 8","nl":"eerwraak","en":"honour kill"},
    {"lesson":"Lesson 8","nl":"Besnijdenis","en":"Muslim custom"},
    {"lesson":"Lesson 8","nl":"mes","en":"knife"},
    {"lesson":"Lesson 8","nl":"wapens","en":"weapons"},
    {"lesson":"Lesson 8","nl":"mishandeling","en":"Violence"},
    {"lesson":"Lesson 8","nl":"Abortus","en":"abortion"},
    {"lesson":"Lesson 8","nl":"Ethunasie","en":"Mercy killing"},
    {"lesson":"Lesson 8","nl":"te sterven","en":"to die"},
    {"lesson":"Lesson 8","nl":"de wet","en":"the law"},
    {"lesson":"Lesson 9","nl":"de geschiedenis","en":"the history"},
    {"lesson":"Lesson 9","nl":"het gebeid","en":"the area"},
    {"lesson":"Lesson 9","nl":"de middleleeuwen","en":"the middle ages"},
    {"lesson":"Lesson 9","nl":"de leider","en":"the leader"},
    {"lesson":"Lesson 9","nl":"de lage landen","en":"the low land"},
    {"lesson":"Lesson 9","nl":"De boeren","en":"the farmer"},
    {"lesson":"Lesson 9","nl":"arm","en":"poor"},
    {"lesson":"Lesson 9","nl":"rijk mensen","en":"rich people"},
    {"lesson":"Lesson 9","nl":"muur","en":"wall"},
    {"lesson":"Lesson 9","nl":"onstonden","en":"emerged"},
    {"lesson":"Lesson 9","nl":"kastelen","en":"castle"},
    {"lesson":"Lesson 9","nl":"afval","en":"waste"},
    {"lesson":"Lesson 9","nl":"bezet","en":"occupy / busy"},
    {"lesson":"Lesson 9","nl":"Oorlog","en":"war"},
    {"lesson":"Lesson 9","nl":"macht","en":"power"},
    {"lesson":"Lesson 9","nl":"gedood","en":"died"},
    {"lesson":"Lesson 9","nl":"verzet","en":"resist"},
    {"lesson":"Lesson 9","nl":"gevochten","en":"fought"},
    {"lesson":"Lesson 9","nl":"doodgeschoten","en":"shot to death"},
    {"lesson":"Lesson 9","nl":"Verenigde","en":"united"},
    {"lesson":"Lesson 9","nl":"Het wilhelmus","en":"national anthem"},
    {"lesson":"Lesson 9","nl":"volkslied","en":"people song"},
    {"lesson":"Lesson 9","nl":"De handel","en":"the trade"},
    {"lesson":"Lesson 9","nl":"de gouden era","en":"golden era"},
    {"lesson":"Lesson 9","nl":"voeren","en":"travel"},
    {"lesson":"Lesson 9","nl":"specerijn","en":"spices"},
    {"lesson":"Lesson 9","nl":"slaven","en":"slaves"},
    {"lesson":"Lesson 9","nl":"schepen","en":"ships"},
    {"lesson":"Lesson 9","nl":"Azie","en":"asia"},
    {"lesson":"Lesson 9","nl":"betaalen","en":"pays"},
    {"lesson":"Lesson 9","nl":"gracht","en":"canal"},
    {"lesson":"Lesson 9","nl":"bewaarden","en":"saved/kept"},
    {"lesson":"Lesson 9","nl":"pakhuizen","en":"warehouse"},
    {"lesson":"Lesson 9","nl":"De Kunst","en":"the art"},
    {"lesson":"Lesson 9","nl":"beroemd","en":"famous"},
    {"lesson":"Lesson 9","nl":"musea","en":"museum"},
    {"lesson":"Lesson 9","nl":"De Nachtwacht","en":"the night wait"},
    {"lesson":"Lesson 9","nl":"eerste grondwet","en":"first law"},
    {"lesson":"Lesson 9","nl":"koninkrijk","en":"kingdom"},
    {"lesson":"Lesson 9","nl":"de arbeiders","en":"the labourers"},
    {"lesson":"Lesson 9","nl":"heel zwaar","en":"very strong"},
    {"lesson":"Lesson 9","nl":"verloren","en":"lost"},
    {"lesson":"Lesson 9","nl":"partij","en":"party"},
    {"lesson":"Lesson 9","nl":"Joden","en":"jews"},
    {"lesson":"Lesson 9","nl":"geheime kamers","en":"secret rooms"},
    {"lesson":"Lesson 9","nl":"onderduiken","en":"underground"},
    {"lesson":"Lesson 9","nl":"Een moeilijke tijd","en":"a difficult time"},
    {"lesson":"Lesson 9","nl":"verdelen","en":"divide"},
    {"lesson":"Lesson 9","nl":"welvaart","en":"welfare"},
    {"lesson":"Lesson 9","nl":"koelkast","en":"fridge"},
    {"lesson":"Lesson 9","nl":"weilanden","en":"Grassland / meadow"},
    {"lesson":"Lesson 9","nl":"de brug","en":"bridge"},
    {"lesson":"Lesson 9","nl":"allochtonen","en":"immigrants"},
    {"lesson":"Lesson 9","nl":"overstroming","en":"flood"},
    {"lesson":"Lesson 9","nl":"de eeuw","en":"the era"},
    {"lesson":"Lesson 10","nl":"Het koninkrijk","en":"kingdom"},
    {"lesson":"Lesson 10","nl":"eiland","en":"island"},
    {"lesson":"Lesson 10","nl":"bijzondere","en":"special"},
    {"lesson":"Lesson 10","nl":"de inwoners","en":"the people/ the habitants"},
    {"lesson":"Lesson 10","nl":"meerderheid","en":"majority"},
    {"lesson":"Lesson 10","nl":"minderheid","en":"minority"},
    {"lesson":"Lesson 10","nl":"Het bestuur","en":"the board"},
    {"lesson":"Lesson 10","nl":"ministers","en":"ministers"},
    {"lesson":"Lesson 10","nl":"plannen","en":"plan"},
    {"lesson":"Lesson 10","nl":"het gezicht","en":"the face"},
    {"lesson":"Lesson 10","nl":"gouden koets","en":"golden coach"},
    {"lesson":"Lesson 10","nl":"troonrede","en":"speech from the throne"},
    {"lesson":"Lesson 10","nl":"de leider","en":"the leader"},
    {"lesson":"Lesson 10","nl":"tussen","en":"between"},
    {"lesson":"Lesson 10","nl":"staatsecretaris","en":"state secretary"},
    {"lesson":"Lesson 10","nl":"het kabinet","en":"the cabinet"},
    {"lesson":"Lesson 10","nl":"taak","en":"task"},
    {"lesson":"Lesson 10","nl":"vergaderingen","en":"meetings"},
    {"lesson":"Lesson 10","nl":"voorstel","en":"proposal"},
    {"lesson":"Lesson 10","nl":"waar","en":"true"},
    {"lesson":"Lesson 10","nl":"niet waar","en":"not true"},
    {"lesson":"Lesson 10","nl":"gebouwd","en":"built"},
    {"lesson":"Lesson 10","nl":"gementeeraad","en":"gemente board"},
    {"lesson":"Lesson 10","nl":"de burgemeester","en":"the mayor"},
    {"lesson":"Lesson 10","nl":"deelgementeen","en":"shared municiplaity"},
    {"lesson":"Lesson 10","nl":"wetten","en":"laws"},
    {"lesson":"Lesson 10","nl":"veiligheid","en":"safety"},
    {"lesson":"Lesson 10","nl":"Het waterschap","en":"water authority"},
    {"lesson":"Lesson 10","nl":"de ideeen","en":"the ideas"},
    {"lesson":"Lesson 10","nl":"tweedekamer","en":"second chamber /room"},
    {"lesson":"Lesson 10","nl":"strenge regels","en":"strictrules"},
    {"lesson":"Lesson 10","nl":"linkse en rechtse","en":"left and right"},
    {"lesson":"Lesson 10","nl":"de reclame","en":"the advertisement"},
    {"lesson":"Lesson 10","nl":"lijstrekker","en":"party leader"},
    {"lesson":"Lesson 10","nl":"stembiljet","en":"ballot paper"},
    {"lesson":"Lesson 10","nl":"De uitslag","en":"the result"},
    {"lesson":"Lesson 10","nl":"Verkiezingen","en":"elections"},
    {"lesson":"Lesson 10","nl":"godsdienst","en":"religion"},
    {"lesson":"Lesson 10","nl":"strijd","en":"fight"},
    {"lesson":"Lesson 10","nl":"hoofddoek","en":"head scarf"},
    {"lesson":"Lesson 10","nl":"de rechter","en":"the judge"},
    {"lesson":"Lesson 10","nl":"staking","en":"strike"}
  ];

  // ---- Elements & helpers ----
  const status=document.getElementById('status');
  const startBtn=document.getElementById('startBtn');
  const dirRadios=[...document.querySelectorAll('input[name=dir]')];
  const lenientChk=document.getElementById('lenient');
  const lessonSel=document.getElementById('lesson');

  const quiz=document.getElementById('quiz');
  const lessonPill=document.getElementById('lessonPill');
  const dirPill=document.getElementById('dirPill');
  const scoreEl=document.getElementById('score');
  const progressEl=document.getElementById('progress');
  const barFill=document.getElementById('barFill');

  const promptEl=document.getElementById('prompt');
  const answerEl=document.getElementById('answer');
  const checkBtn=document.getElementById('checkBtn');
  const feedback=document.getElementById('feedback');
  const meta=document.getElementById('meta');

  let queue=[], idx=0, score=0, autoTimer=null;

  function getDir(){ return dirRadios.find(r=>r.checked).value; }
  function normalize(s){ return (s||'').toLowerCase().replace(/[()\[\]{}]/g,'').replace(/\s+/g,' ').trim(); }
  function stripArticles(s){ return s.replace(/^(de|het|the|a|an)\s+/i,'').trim(); }
  function normalizeForCompare(s){ let t=normalize(s); if(lenientChk.checked) t=stripArticles(t); return t; }
  function splitVariants(s){ let t=(s||'').replace(/\n/g,' ').replace(/\s{2,}/g,' ').replace(/\((.*?)\)/g,'').trim(); const p=t.split(/\s*[,;\/\|]\s*/).map(x=>x.trim()).filter(Boolean); return p.length?p:[t]; }
  function isCorrect(user, answers){ const u=normalizeForCompare(user); return answers.some(a=>normalizeForCompare(a)===u); }
  function sampleRows(){ const choice=lessonSel.value; return (choice==='__ALL__')? ROWS.slice() : ROWS.filter(r=>r.lesson===choice); }

  function buildQueue(dir){
    const items = sampleRows();
    const q=[]; items.forEach(r=>{
      const nlV=splitVariants(r.nl), enV=splitVariants(r.en);
      const nlA=new Set(), enA=new Set();
      nlV.forEach(v=>{ nlA.add(v); nlA.add(stripArticles(v)); });
      enV.forEach(v=>{ enA.add(v); enA.add(stripArticles(v)); });
      if(dir==='nl-en') q.push({prompt:nlV[0], answers:[...enA], lesson:r.lesson});
      else q.push({prompt:enV[0], answers:[...nlA], lesson:r.lesson});
    });
    for(let i=q.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [q[i],q[j]]=[q[j],q[i]]; }
    return q;
  }

  function updateProgress(){
    progressEl.textContent=`${idx+1}/${queue.length}`;
    barFill.style.width=(Math.round(idx/Math.max(1,queue.length)*100))+'%';
    scoreEl.textContent=score;
  }

  function scheduleNext(delayMs=0){
    clearTimeout(autoTimer);
    autoTimer=setTimeout(()=>{ idx++; load(); }, delayMs);
  }

  function load(){
    feedback.textContent=''; meta.textContent='';
    answerEl.disabled=false; checkBtn.disabled=false;
    if(idx>=queue.length){
      promptEl.textContent='Finished! ðŸŽ‰';
      feedback.innerHTML = `<b>Score:</b> ${score} / ${queue.length}`;
      answerEl.disabled=true; checkBtn.disabled=true; barFill.style.width='100%';
      return;
    }
    const q=queue[idx];
    promptEl.textContent=q.prompt;
    answerEl.value='';
    // iOS sometimes ignores immediate focus; defer a tick.
    setTimeout(()=>{ try{ answerEl.focus(); }catch{} }, 0);
    lessonPill.textContent = q.lesson;
    updateProgress();
  }

  function start(){
    idx=0; score=0; const dir=getDir();
    dirPill.textContent=(dir==='nl-en'?'NL â†’ EN':'EN â†’ NL');
    queue = buildQueue(dir);
    if(!queue.length){ status.textContent='No items found for this selection.'; return; }
    const l = lessonSel.value==='__ALL__'?'All (6 & 7 & 8 & 9 & 10)':lessonSel.value;
    lessonPill.textContent = l;
    quiz.style.display=''; load();
  }

  // Add touch listeners so taps work inside WhatsAppâ€™s viewer
  startBtn.addEventListener('click', start, {passive:true});
  startBtn.addEventListener('touchend', (e)=>{ e.preventDefault(); start(); }, {passive:false});

  function onCheck(){
    const q=queue[idx]; const ok=isCorrect(answerEl.value,q.answers);
    if(ok) score++;
    feedback.innerHTML = ok ? '<span class="ok">Correct!</span>'
                            : '<span class="bad">Wrong.</span> Correct: <b>'+q.answers[0]+'</b>';
    answerEl.disabled=true; checkBtn.disabled=true;
    if(ok){ idx++; load(); } else { scheduleNext(3000); }
  }

  checkBtn.addEventListener('click', onCheck, {passive:true});
  checkBtn.addEventListener('touchend', (e)=>{ e.preventDefault(); onCheck(); }, {passive:false});
  answerEl.addEventListener('keydown',(e)=>{ if(e.key==='Enter') onCheck(); });

  status.textContent=`Loaded Lessons 6 & 7 & 8 & 9 & 10 â€“ ${ROWS.length} items.`;
})();
</script>
</body>
</html>
